= UITableView, UITableViewController

===== iOS에서 TableView를 사용한 앱
* Itunes => Video
* 시스템 설정 
* 메일 박스 

image:./image/tableview-1.png[45%, 45%]
image:./image/tableview-2.png[45%, 45%]

===== UITableViewDataSource
* TableView Data
* Table Section 개수
* Section 하나마다 가지고 있는 줄 개수
* 한 Row가 가지고 있는 Cell 정보

===== UITableViewDelegate
* TableView 관련 이벤트, 커스텀
* 어떤 Row를 선택할 때 발생하는 이벤트 
* 재정렬
* Table Header, Footer 커스텀 구현 지원

===== Index Path
* Index Path를 통해 Section, Row를 알 수 있음
* `NSIndexPath, IndexPath 링크 참고`

===== Multiple Sections
* `numberOfSectionsInTableView(_:)`
* `tableView(_:titleForHeaderInSection:):`

===== Deleting Rows
* Delete 버튼을 이용하여 Row 삭제
** `tableView(_:commitEditingStyle:forRowAtIndexPath:)`
** Model 객체를 삭제함
** 삭제한 정보를 Table View에 반영함

* Navigation Bar에 있는 Edit 버튼을 이용하여 Row 삭제
** `editButtonItem()`

===== Inserting Rows
* _Add New Row_ 버튼을 TableView 활성화하기
** `tableView(_:numberOfRowsInSection:)` 
** `tableView(_:cellForRowAtIndexPath:)`
** `setEditing(_:animated:)`
** `tableView(_:commitEditingStyle:forRowAtIndexPath:)`
* Row 추가 이벤트 다루기
** `tableView(_:commitEditingStyle:forRowAtIndexPath:)`
** `tableView(_:didSelectRowAtIndexPath:):`

===== Moving Rows
* `tableView(_:canMoveRowAtIndexPath:)`
* `tableView(_:moveRowAtIndexPath:toIndexPath:)`

===== Custom Cells
* _Attribute Inspector > Table View Cell > Style => Custom 선택, Identifier 설정_
* Subview Tag로 접근하면 안됨 => Runtime 에러 발생함

[source, swift]
----
let label = cell.viewWithTag(1) as! UILabel
label.text = icon.title`
----

* Custom Cell 만들기
** Subclass 만듦
** Custom class 정의함
** IconTableViewCell Outlet 연결함

image:./image/tableview-custom-cell-1.png[45%, 45%]
image:./image/tableview-custom-cell-2.png[45%, 45%]
image:./image/tableview-custom-cell-3.png[45%, 45%]

* Custom Cell 높이 정하기
[source, swift]
----
// 직접 설정
tableView.rowHeight = 44.0

// Delegate 이용하여 설정
func tableView(tableView: UITableView, heightForRowAtIndexPath indexPath: NSIndexPath) -> CGFloat {
    return 40 
}

// Auto Layout 이용하여 설정
tableView.rowHeight = UITableViewAutomaticDimension
tableView.estimatedRowHeight = 70.0
----

===== Static Cells
* View Controller에서 Cell이 가지고 있는 Outlet을 직접 연결하면 동작하지 않음

[source, swift]
----
class DetailViewController: UIViewController, UITextFieldDelegate,
      UIImagePickerControllerDelegate, UINavigationController {
    @IBOutlet weak var titleTextField: UITextField!
    @IBOutlet weak var subtitleTextField: UITextField!
    @IBOutlet weak var favoriteSwitch: UISwitch!
    @IBOutlet weak var iconImageView: UIImageView!

    // ...
}
----

===== Accessory View

image:./image/tableview-accessory-1.png[45%, 45%]
image:./image/tableview-accessory-2.png[45%, 45%]

[source, swift]
----
cell.accessoryType = .DetailDisclosureButton
----

===== Indexing
* 정렬 => _UILocalizedIndexedCollation_

[source, swift]
----
UILocalizedIndexedCollation.currentCollation().sectionTitles
 
let collation = UILocalizedIndexedCollation.currentCollation()
collation.sectionForObject(icon, collationStringSelector:
"title")
----

* Indexing
** Indices => `sectionIndexTitlesForTableView(_:)`
** Sections => `tableView(_:sectionForSection IndexTitle:atIndex:)`

[source, swift]
----
// Index Titles
UILocalizedIndexedCollation.currentCollation().sectionTitles

// Index Title을 통해 Section 찾기
UILocalizedIndexedCollation.currentCollation().sectionForSectionIndexTitleAtIndex(index)
----

===== TableView의 재사용
* 사용할 수 있는 메모리가 작아서 데이터의 양만큼 View를 생성할 수 없기 때문에 View를 재사용함으로써 메모리를 절약할 수 있음
* 재사용의 원리
** TableView에서 Cell을 표시하기 위해 Cell 인스턴스를 요청함
** DataSource는 Reuse Queue에서 재사용을 위해 대기하고 있다가 Cell이 있다면 새로운 데이터를 설정하고 없다면 새로운 Cell을 만듦
** DataSource가 Cell이 반환되면 화면에 표시함
** 스크롤하게 되면 Cell들이 화면에서 사라지면서 Reuse Queue에 들어감
 
===== 참고
* https://videos.raywenderlich.com/courses/22-table-views-in-ios/lessons/1[Table Views in iOS]
* https://developer.apple.com/documentation/foundation/nsindexpath[NSIndexPath]
* https://developer.apple.com/documentation/foundation/indexpath[IndexPath]
* https://developer.apple.com/documentation/uikit/uitableview[UITableView]
* https://developer.apple.com/documentation/uikit/uitableviewcontroller[UITableViewController]