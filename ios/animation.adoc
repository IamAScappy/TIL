= Animation

=== Animating Constraints

===== Animating Constraint Constants
* _Auto Layout Constant_
* _UIView.animate_
* `self.view.layoutIfNeeded()` 사용하지 않으면 View 애니메이션 진행하는 동안 Text Label 사이즈가 깨지는 이유 ?

image:./image/ios-animation-1.gif[45%, 45%]
image:./image/ios-animation-2.gif[45%, 45%]

[source, swift]
----
@IBAction func toggleMenu(_ sender: AnyObject) {
    menuIsOpen = !menuIsOpen

    //TODO: Build your first constraint animation!
   titleLabel.text = menuIsOpen ? "Select Item" : "Package List"
   self.view.layoutIfNeeded()

    menuConstant.constant = menuIsOpen ? 200.0 : 60.0

    UIView.animate(
        withDuration: 0.33,
        delay: 0.0,
        options: .curveEaseIn,
        animations: {
        self.view.layoutIfNeeded()
        },
        completion: nil
    )
}
----

===== Animate Position with Constants
* _CGAffineTransform_

image:./image/ios-animation-3.gif[45%, 45%]

[source, swift]
----
@IBAction func toggleMenu(_ sender: AnyObject) {
    // ...

    titleLabel.text = menuIsOpen ? "Select Item" : "Packing List"
    view.layoutIfNeeded()
		
    menuHeightConstraint.constant = menuIsOpen ? 200.0 : 60.0
    closedButtonConstraint.constant = menuIsOpen ? 18.0 : 6.0
		
    UIView.animate(
      withDuration: 0.33,
      delay: 0.0,
      options: .curveEaseIn,
      animations: {
        let angle: CGFloat = self.menuIsOpen ? .pi / 4 : 0.0
        self.buttonMenu.transform = CGAffineTransform(rotationAngle: angle)
        self.view.layoutIfNeeded()
      },
      completion: nil
    )
  }

  // ...
}
----

* _UIViewAnimationOptions_

image:./image/ios-animation-4.gif[45%, 45%]

[source, swift]
----
import PlaygroundSupport
import UIKit

let view = OptionsView(frame: CGRect(
  x: 0, y: 0,
  width: 400, height: 800
))

PlaygroundPage.current.liveView = view

view.duration = 2.0

let beachballOptions: UIViewAnimationOptions = [.curveEaseIn]
let drinkOptions: UIViewAnimationOptions = [.curveEaseOut]
let icecreamOptions: UIViewAnimationOptions = [.curveEaseInOut]

extension OptionsView {
  @objc func animate() {
    UIView.animate(
      withDuration: duration, delay: 0.0,
      options: beachballOptions, animations: {
        view.beachballConY.constant = view.beachballConY.constant * -1
        view.layoutIfNeeded()
      }, completion: nil
    )
    UIView.animate(withDuration: duration, delay: 0.0,
      options: drinkOptions, animations: {
        view.drinkConY.constant = view.drinkConY.constant * -1
        view.layoutIfNeeded()
      }, completion: nil
    )
    UIView.animate(withDuration: duration, delay: 0.0,
      options: icecreamOptions, animations: {
        view.icecreamConY.constant = view.icecreamConY.constant * -1
        view.layoutIfNeeded()
      }, completion: nil
    )
  }
}

view.button.addTarget(view, action: #selector(view.animate), for: .touchUpInside)
----