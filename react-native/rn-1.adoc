= React Native 1

=== 개요

===== What is React Native?
* 커뮤니티( 지원을 받아 생태계가 커지고 있음
* 크로스 플랫폼 모바일 앱 개발을 위한 프레임워크. 그러나, Native라고 생각하는 것이 좋음
* React 기반으로 코드 작성

===== 동작원리
* RN으로 만든 데이터는 String 형태로 보내짐. 브릿지(Native Bridge)을 통해 Native로 파싱해서 가공함
* Native에서 자바스크립트로 이벤트를 보내기 위해서 브릿지를 통해 콜백(비동기)를 전달함
* Native 퍼포먼스를 내긴 하지만, JS는 싱글 쓰레드이기 때문에 Native와 비동기로 전송되는 횟수가 많아지면 성능이 안 좋아짐. 예를 들어 애니메이션이 많은 화면이 성능이 좋지 않음
* `리액트 네이티브 안을 들여다보기 링크 참고`

===== Why React Native?
* Native 수준의 성능 제공
* Native와 거의 동일한 UX 제공
** 그러나, 개발하다보면 Native와 미묘한 차이 있음
* *기존의 React, JavaScript 생태계의 확장*
** React로 만들어진 라이브러리를 React Native로 포팅하는 작업을 많이 함
* HMR 지원 등을 통해 개발 생산성 향상
* 필요하면 Native 기능을 확장할 수 있지만. Native 기능을 알아야 함 
** _iOS, Android 의존성이 많이 걸린 앱이냐? 판단이 중요함_
** 순수하게 React Native로 개발하기 위해서 Native 의존성이 걸린 부분을 제거해야 함
** Native로 개발하고 React Native을 끼워넣는 개발 방식도 있음

===== React vs. React Native
* Dom, Styling이 다름
** React => <div>, <p>, CSS
** RN => <View>, <Text>, StyleSheet
** React와 RN이 다르지만, 컴포넌트 셋을 하나만 만들고 공유해서 쓸 수 있음
** react-native-web도 있음. RN으로 작성하고 웹으로 바꿔줌
* Animation, Gesture, Navigation(react-router / react-navigtion => js로만 구성되어 있음. 커스텀마이징이 쉬움, react-native-navigation)이 다름

image:./images/react-vs-rn.png[]

=== React Native 프로젝트 생성 및 설정

===== React Native 프로젝트 만들기
* react-native cli
** 웹에서 프로젝트 만들 수 있음. 배포만 못함
** iOS, Android 기본적인 셋팅을 가지고 있어서 어느정도 설정이 가능함
* create-react-native-app
** Native 앱 설정을 숨겨져 있음. 제공하는 Native 모듈말고 아무것도 사용할 수 없음
** 디바이스 연결이 쉬워서 프로토 타이핑을 빠르게 작성할 수 있음
** expo.io 활용해서 만든 프로젝트. SDK 관리함

===== react-native cli를 이용해 Android 설정
* Node 설치

[source, shell]
----
$ brew install watchman
$ brew install yarn

$ npm install -g react-native-cli react-native-git-upgrade
$ yarn global add react-native-cli react-native-git-upgrade
----

* Java 8 설치
* Android Studio SDK Manager 필요한 부분 설치하고 `vi ~/.bash_profile` 를 통해 안드로이드 Path 설정
** Gradle 업데이트 하면 안됨. SDK 버전 다시 맞춰야 함

[source, shell]
----
$ vi ~/.bash_profile

# ~/.bash_profile
export ANDROID_HOME=$HOME/Library/Android/sdk
export PATH=$PATH:$ANDROID_HOME/tools
export PATH=$PATH:$ANDROID_HOME/tools/bin
export PATH=$PATH:$ANDROID_HOME/platform-tools
----

* 프로젝트 생성

[source, shell]
----
$ react-native init Project
----

image:./images/rn-android-studio-sdk-manager-1.png[]
image:./images/rn-android-studio-sdk-manager-2.png[]

* Android는 에뮬레이터 먼저 띄운 상태에서 진행해야 함
** 안드로이드 장비가 있다면 run-android 진행하면 됨
** 에뮬레이터 없는 상태에서 진행한다면 설치할 장비가 없다는 메세지가 뜸
** 디바이스와 실제 장비는 두 개다 연결하면 안됨. 디바이스는 하나만 하는 것이 좋음

[source, shell]
----
$ react-native run-android
----


image:./images/android-execution-screen-1.png[]
image:./images/android-execution-screen-2.png[]

* _Command + D_ 단축키로 아래 화면을 확인할 수 있음
** http://10.0.2.2:8081/ => http://localhost:8081/ 변경
** 새로고침 단축키 _R R_

image:./images/android-execution-screen-3.png[]

===== react-native cli를 이용해 iOS 설정
* XCode 설치

[source, shell]
----
# 장비 실행
# 같은 네트워크에 있어야 함
$ npm install -g ios-deploy

# 디바이스 연결
$ react-native run-ios --device

# 시뮬레이터 실행
$ react-native run-ios 
----
* Command + R, Command + D

image:./images/ios-execution-screen-1.png[]

===== create-react-native-app 이용해서 프로젝트 생성
* 프로젝트 환경 설정 시간 최소화
* 디바이스를 이용한 개발이 용이
* XCode, Android Studio 설치 불필요
* 원한다면 "eject"를 통해 네이티브 수정 가능. 원래대로 돌아가지 못함

[source, shell]
----
$ npm install -g create-react-native-app

$ create-react-native-app my-app
$ cd my-app

$ npm run start 

# 시뮬레이터, 에뮬레이터 실행
# iOS는 터미널에서 i를 누름
# Android는 터미널에서 a를 누름
----

===== 참고
* https://medium.com/@kyo504/번역-잠깐-내가-만든-리액트-네이티브-앱이-시작하면-무슨일이-일어나는거지-리액트-네이티브-안을-들여다보기-2b4a9bce79a2[리액트 네이티브 안을 들여다보기]
* http://slides.com/kyo504/react-native-day1?token=7pQgFnYz#/
* https://medium.com/@alexmngn/from-reactjs-to-react-native-what-are-the-main-differences-between-both-d6e8e88ebf24[What are the main differences between ReactJS and React-Native?]
* https://snack.expo.io