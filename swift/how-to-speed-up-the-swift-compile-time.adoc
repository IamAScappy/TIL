= Swift 컴파일 속도를 향상시키는 방법

=== 도움이 되는 툴을 이용하자

===== Build Time Analyzer for Xcode
* 프로젝트의 데이터를 분석해서 컴파일하는데 어떤 부분에서 얼마나 시간이 걸리는지 알려줌
* 문제 있는 부분을 발견하고 최적화를 하자:)

=== XCode를 통해 개선하기

===== 최적화 레벨을 조절하자!
* `Target — Build Setting 에서 Optimization Level의 디버그 항목` 을 None 으로 설정함

===== 빌드세팅의 User-Defined 항목으로 SWIFT_WHOLE_MODULE_OPTIMIZATION = YES 을 추가함
* 해당 기능을 WMO라고 줄여서 부르기도 하는데 빌드시 모든 파일을 한번에 분석해 최적화 하는 방법을 말함

===== Remove dSYM file from Debug
* dSYM (디버그 기호 파일)은 디버깅 정보를 가져 와서 dSYM 번들에 저장하는 파일
* 프로젝트를 컴파일할때마다 생성되는데 디버깅시에는 DWARF 값이 변경되기때문에 사실상 필요가 없어 릴리즈 모드시에만 적용함

===== Check your Build Active Architecture Only values
* 릴리즈시에는 다양한 아키텍쳐를 지원해야 하므로 NO로 나머지 경우에 대해 전부 YES로 설정함

===== Empty your Derived Data
* 프로젝트를 만들때 문제가 발생한다면 이 부분부터 시작해야 함
* File -> Project Settings 에서 DerivedData 를 선택하면 해당 폴더에 접근이 가능함. 이것을 삭제하도록 하자!
* 프로젝를 실행하면 다시 생성하기 때문에 잊지 말아야할 것은 데이터를 지우고 프로젝트를 클린해야 한다는 것!

> 해당 폴더에 프로젝트 빌드의 결과 등이 저장되어 있음. 가끔 빌드가 꼬이면 해당폴더를 삭제시 잘 수행되는 경우가 있기에 첫 머리말을 이렇게 시작한것 같음. 참고로 첫번째로 소개했던 방법을 수행해 보신분들은 빌드시 생성되는 Derived Data 를 통해 컴파일 속도분석이 이루어 진다는 것을 알 수 있음

=== Swift 코드를 통한 개선하기

===== 6 Tips For A Software Development Success Philosophy 요약
. `6 Tips For A Software Development Success Philosophy 링크 참고` 
. Quality pays
** Time and resources spent on quality give a positive return on investment on development time, development costs, team and customer satisfaction etc
. Careful risk-management
** An essential part of every successful project is risk-management
. Set clear goals
** People, development process, technology, and clear goals are all important for success. Even great developers fail at projects if a process is wrong, technology has major problems or goals are unclear.
. Long-term priorities
** Remeber they must be balanced with short time priorities.
. Upgrade your system
. Automate your software development
** Investment in automation is key for efficient (agile) software development.

===== 타입 변수를 항상 지정해줘야 함
* 컴파일러는 어떠한 타입인지를 미리 알 수 있기때문에 읽는 속도를 절약할 수 있음

[source, swift]
----
// 좋음
let array: [String] = [“a”, “b”, “c”, “d”, “e”, “f”, “g”]

// 나쁨
let array = [“a”, “b”, “c”, “d”, “e”, “f”, “g”]
----

===== Nil 병합 연산자를 최대한 피하라

[source, swift]
----
// 좋음 
if let name = string { 
   // Not nil
} else {
   // nil
}

// 나쁨
let name = string ?? “”
----

====== 삼항 연산자를 피하라

[source, swift]
----
// 좋음 
var letter = “”
if isFirst { 
   letter = “a”
} else {
   letter = “b”
}

// 나쁨
let letter = isFirst ? “a” : “b”
----

===== 문자열 합칠 때 + 연산자 결합은 사용하지 마라

[source, swift]
----
// 좋음 
let url = “https://google.com/\("path")/\("anotherpath")"

// 나쁨
let url = “https://google.com/” + “path/” + “anotherpath”
----

===== 조건문의 비교값에 연산을 넣지 마라

[source, swift]
----
// 좋음
if number == 3600 { 
    // ...
}

// 나쁨 
if number == 60 * 60 { 
    // ...
}
----

===== 참고
* https://hackernoon.com/speed-up-swift-compile-time-6f62d86f85e6[Speed up Swift compile time]
* https://github.com/RobertGummesson/BuildTimeAnalyzer-for-Xcode[Build Time Analyzer for Xcode]
* https://theappspace.com/software-development-success-philosophy/[6 Tips For A Software Development Success Philosophy]